export function compressTree(input) {
  return {
    type: "minimal",
    value: input.children.map(compressNode).filter((v) => v !== void 0)
  };
}
export function decompressTree(input) {
  return {
    type: "root",
    children: input.value.map(decompressNode)
  };
}
function decompressNode(input) {
  if (typeof input === "string") {
    return {
      type: "text",
      value: input
    };
  }
  const [tag, props, ...children] = input;
  return {
    type: "element",
    tag,
    props,
    children: children.map(decompressNode)
  };
}
function compressNode(input) {
  if (input.type === "comment") {
    return void 0;
  }
  if (input.type === "text") {
    return input.value;
  }
  if (input.tag === "code" && input.props?.className && input.props.className.length === 0) {
    delete input.props.className;
  }
  return [
    input.tag,
    input.props || {},
    ...input.children.map(compressNode).filter((v) => v !== void 0)
  ];
}
